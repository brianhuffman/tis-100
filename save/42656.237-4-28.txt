@0
## FEWEST CYCLES

# 266/4/28
# NEW: 237/4/28

@1
#INVARIANT: ACC=0
A: MOV ACC RIGHT
MOV UP ACC
JNZ A

#SIGNAL A FULL
MOV DOWN NIL

B: MOV UP ACC
MOV ACC DOWN
JNZ B

#WAIT FOR A EMPTY
MOV DOWN NIL

@2


@3


@4
#A FULL/B EMPTY
MOV -1 UP
MOV RIGHT NIL

#INVARIANT: ACC=0
B: MOV ACC DOWN
MOV UP ACC
JNZ B

#B FULL/A EMPTY
#MOV -1 RIGHT #NIL
#MOV UP NIL
MOV RIGHT UP

@5
#A FULL/B EMPTY
#MOV -1 DOWN
#MOV -1 LEFT
MOV DOWN LEFT

A: MOV UP ACC
MOV ACC DOWN
JNZ A

#B FULL/A EMPTY
MOV -1 LEFT
MOV -1 DOWN

@6


@7
#SIGNAL B EMPTY
MOV -1 UP

A: MOV UP ACC
MOV ACC DOWN
JNZ A

#WAIT FOR B FULL
MOV UP NIL

B: MOV LEFT ACC
MOV ACC DOWN
JNZ B

@8

